{% extends "base.html" %}

{% block titulo %}
<title>Chat</title>
{% endblock %}

{% block body %}
<div class="titulo">
    <h1>CHAT</h1>
</div>
<div class="contenedorMensajes">
    {% if mensajes|length > 0 %}
        {% for mensaje in mensajes %}
            <div class="mensaje{{ mensaje.emisor.tipo == usuarioActual.tipo ? 'Der' : 'Izq' }}">
                <div class="mensaje {{ mensaje.emisor.tipo == usuarioActual.tipo ? 'enviado' : 'recibido' }}">
                    <div class="cabeceraMensaje">
                        <p class="nombreMensaje">{{ mensaje.emisor.nombre }}</p>
                        <p class="fechaMensaje">{{ mensaje.fechaEmision }}</p>
                    </div>
                    <div class="contenidoMensaje">
                        {% if mensaje.tipo == 'texto' %}
                        <p class="textoMensaje">{{ mensaje.contenido }}</p>
                        {% elseif mensaje.tipo == 'audio' %}
                        <div class="audioMensaje">Aquí va un audio con esta ruta {{ mensaje.contenido }}</div>
                        {% elseif mensaje.tipo == 'video' %}
                        <div class="audioMensaje">Aquí va un vídeo con esta ruta {{ mensaje.contenido }}</div>
                        {% else %}
                        <p>Error al cargar el mensaje</p>
                        {% endif %}
                    </div>
                </div>
            </div>
        {% endfor %}
    {% else %}
        <p>No hay mensajes</p>
    {% endif %}
</div>
<div class="contenedorBotonesSubidaChat">
    <button id="botonCamaraChat" class="reiniciarBoton botonSubidaChat botonCamaraChat">
        <img src="templates/img/cámara de fotos.png" alt="Grabar un vídeo">
    </button>
    <button id="botonMicrofonoChat" class="reiniciarBoton botonSubidaChat botonMicrofonoChat">
        <img src="templates/img/micrófono.png" alt="Grabar un audio">
    </button>
    <button id="botonTextoChat" class="reiniciarBoton botonSubidaChat botonTextoChat">
        <img src="templates/img/escribir.png" alt="Escribir un mensaje">
    </button>
</div>

<textarea id="escribirTextoChat" class="escribirTextoChat" name="mensajeTexto" id="mensajeTexto" rows="3"></textarea>
<button id="enviarMensaje" class="reiniciarBoton enviarMensaje">
    <img src="templates/img/tick.png" alt="Enviar Mensaje">
</button>
{% endblock %}

{% block postScripts %}
<script type="text/javascript" src="templates/js/mostrarChat.js"></script>
{% endblock postScripts %}
